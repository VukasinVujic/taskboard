@if (toastVm$ | async; as vm) { @if(vm.visible){
<div
  class="toast"
  [class.success]="vm.type === 'success'"
  [class.error]="vm.type === 'error'"
  [class.info]="vm.type === 'info'"
>
  {{ vm.message }}

  @if( vm.countdown !== null){
  <span>
    {{ vm.countdown }}
  </span>

  }
  <button (click)="closeToast()">X</button>
</div>

} }
<div style="margin-top: 20px">Search tasks:</div>
<input type="text" (input)="onSearch($event.target.value)" #searchinput />
<select
  name=""
  id=""
  #searchselect
  (change)="onStatusFilterChange($any($event.target).value)"
>
  <option value="all">All</option>
  <option value="todo">Todo</option>
  <option value="in-progress">In Progress</option>
  <option value="done">Done</option>
</select>

@if(taskListVm$ | async; as vm) { @if(vm.loading){
<div>Loading...</div>
} @if(vm.showNoTasksYet) {
<div class="no-tasks">No task still added ... please add new task</div>

} @if(vm.showNoResults){
<div class="no-tasks">
  No results for : "<strong> {{ vm.trimTerm }} </strong>"
</div>

@if(vm.trimTerm.length > 0){
<button class="no-tasks-btn" (click)="clearSearch(searchinput)">
  Clear search
</button>

} } } @if(showNoResults$ | async; as filterVm){ @if(filterVm.filterEmpty){ No
results in :

{{ filterVm.taskStatus }}

<button class="no-tasks-btn" (click)="resetFilter(searchselect)">
  Reset Filter
</button>

} }

<div class="kanaban">
  <app-task-column
    title="TODO"
    [tasks$]="todo$"
    [statuses]="statuses"
    [updatingTaskIds$]="updatingTaskIds$"
    (changeStatus)="onChangeStatus($event.id, $event.status)"
    (deleteTask)="deleteTask($event)"
    (saveTask)="onUpdateTask($event)"
  />

  <app-task-column
    title="IN PROGRESS"
    [tasks$]="inProgress$"
    [statuses]="statuses"
    [updatingTaskIds$]="updatingTaskIds$"
    (changeStatus)="onChangeStatus($event.id, $event.status)"
    (deleteTask)="deleteTask($event)"
    (saveTask)="onUpdateTask($event)"
  />

  <app-task-column
    title="DONE"
    [tasks$]="done$"
    [statuses]="statuses"
    [updatingTaskIds$]="updatingTaskIds$"
    (changeStatus)="onChangeStatus($event.id, $event.status)"
    (deleteTask)="deleteTask($event)"
    (saveTask)="onUpdateTask($event)"
  />
</div>

@if(showUndo$ | async) { @if (lastDeletedTask$ | async; as t) {
<button (click)="unDoDeletedTask()" class="undo-bar">
  UNDO deleted task {{ t.title }}
</button>

} @if(undoCountdown$ | async; as value) {

<div>Undo za {{ value }}</div>
} }
